<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/study-log/_next/static/css/dd7e91777d3df03c.css" data-precedence="next"/><link rel="stylesheet" href="/study-log/_next/static/css/a40a511565153bc1.css" data-precedence="next"/><link rel="stylesheet" href="/study-log/_next/static/css/d1ab85c59d8dbdc1.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/study-log/_next/static/chunks/webpack-7a682e7e5b3e6b61.js"/><script src="/study-log/_next/static/chunks/fd9d1056-fb7c77b75e3b02c5.js" async=""></script><script src="/study-log/_next/static/chunks/117-03e2c6ac7e0ed1e9.js" async=""></script><script src="/study-log/_next/static/chunks/main-app-f227927fb98cf6db.js" async=""></script><script src="/study-log/_next/static/chunks/827-56c00c95f5d3481c.js" async=""></script><script src="/study-log/_next/static/chunks/597-c23ebfe96800db79.js" async=""></script><script src="/study-log/_next/static/chunks/769-57d8baf6e86747a5.js" async=""></script><script src="/study-log/_next/static/chunks/908-bc79b8cd607d20d8.js" async=""></script><script src="/study-log/_next/static/chunks/app/blog/%5B...categories%5D/page-f1535209f3f9f2a0.js" async=""></script><script src="/study-log/_next/static/chunks/4f9d9cd8-f52099ca3f429dbf.js" async=""></script><script src="/study-log/_next/static/chunks/3627521c-b58503ab95e41863.js" async=""></script><script src="/study-log/_next/static/chunks/app/layout-c6b97914a5942784.js" async=""></script><title>Patterns for Concurrency Programming</title><meta name="description" content="Concurrency Programming 에서 쓰이는 도구와 쉽게 범할 요류들 정리"/><link rel="author" href="moksha1905@gmail.com"/><meta name="author" content="Mona04"/><meta name="category" content="/blog/programming/pattern/concurrency/concurrency-parallelism"/><link rel="canonical" href="https://mona04.github.io/study-log/blog/programming/pattern/concurrency/concurrency-parallelism"/><link rel="icon" href="/study-log/favicon.ico"/><script src="/study-log/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="tw-relative tw-min-h-screen tw-bg-color-page-background"><script>(function(){try{(null==localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches||"dark"==localStorage.getItem("theme"))&&document.documentElement.setAttribute("data-theme","dark")}catch(e){}})()</script><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans&amp;family=Noto+Sans+KR&amp;display=swap"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Gothic+A1&amp;display=swap"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous"/><nav class="masthead_masthead__zVIwm"><button class="masthead_menu-btn__tZ2_W  " title="menu button" id="menu-toggle-btn" type="button"><div class="masthead_menu-lines__iNcj5"><div class="masthead_line__AM5zP masthead_line1__NaE01"></div><div class="masthead_line__AM5zP masthead_line2__ai3cP"></div><div class="masthead_line__AM5zP masthead_line3__g18ZL"></div></div></button><a class="tw-self-center tw-ml-1 tw-font-sans tw-font-bold tw-text-color-primary tw-text-xl hover:tw-text-color-text" target="_self" href="/study-log">LOG | STUDY</a><div class="tw-grow"></div><button class="tw-flex tw-self-center tw-text-xl hover:tw-text-color-primary" title="search button" id="search-open-btn" type="button"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0 0 11.6 0l43.6-43.5a8.2 8.2 0 0 0 0-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"></path></svg></button><div class="darkmode-toggle_toggleBtn__XO5La tw-flex tw-self-center tw-ml-2 tw-mr-4 tw-text-xl "><input id="darkmode-btn" type="checkbox" name="darkmode-btn"/><label for="darkmode-btn">Toggle</label></div></nav><aside></aside><section></section><main class="tw-mt-nav-height tw-pb-52"><article class="content2"><h1 class="mobile:tw-text-2xl tw-text-3xl tw-leading-normal tw-font-bold tw-mt-0" itemProp="headline">Patterns for Concurrency Programming</h1><nav class="tw-flex tw-flex-row tw-text-smtw-mb-4"><span class="material-symbols-outlined md-base tw-self-center tw-align-text-top  tw-w-5">folder_open</span><a class="tw-text-sm" target="_self" href="/study-log">Home</a><div class="tw-flex tw-flex-row tw-text-sm"><div>/</div><a target="_self" href="/study-log/blog">blog</a></div><div class="tw-flex tw-flex-row tw-text-sm"><div>/</div><a target="_self" href="/study-log/blog/programming">programming</a></div><div class="tw-flex tw-flex-row tw-text-sm"><div>/</div><a target="_self" href="/study-log/blog/programming/pattern">pattern</a></div><div class="tw-flex tw-flex-row tw-text-sm"><div>/</div><a target="_self" href="/study-log/blog/programming/pattern/concurrency">concurrency</a></div><div class="tw-flex tw-flex-row tw-text-sm"><div>/</div><a target="_self" href="/study-log/blog/programming/pattern/concurrency/concurrency-parallelism">concurrency-parallelism</a></div></nav><div class="tw-mt-0.5"><div class="tw-flex tw-flex-row tw-text-sm"><i class="material-symbols-outlined md-sm tw-self-center tw-w-5">schedule</i><div class="tw-color-text-dimmed">Posted  :</div><div class="tw-ml-2">4/29/2024</div></div></div><section class="toc_toc__bVqVp"><header><h4>On This Page</h4></header><ul><li class=""><a href="#병렬성과-동시성" class="tw-scroll-smooth">병렬성과 동시성</a></li><li class=""><a href="#Thread-Synchronize" class="tw-scroll-smooth">Thread Synchronize</a><ul><li class=""><a href="#Lock" class="tw-scroll-smooth">Lock</a></li><li class=""><a href="#Memory-Model" class="tw-scroll-smooth">Memory Model</a></li><li class=""><a href="#주의사항" class="tw-scroll-smooth">주의사항</a><ul><li class=""><a href="#Dead-Lock" class="tw-scroll-smooth">Dead Lock</a></li><li class=""><a href="#Try-Catch" class="tw-scroll-smooth">Try Catch</a></li><li class=""><a href="#Spurious-Wakeup" class="tw-scroll-smooth">Spurious Wakeup</a></li></ul></li><li class=""><a href="#Patterns" class="tw-scroll-smooth">Patterns</a><ul><li class=""><a href="#copy-on-write-array-list." class="tw-scroll-smooth">copy on write array list.</a></li><li class=""><a href="#Thread-Pool" class="tw-scroll-smooth">Thread Pool</a></li><li class=""><a href="#Double-Checked-Pattern" class="tw-scroll-smooth">Double Checked Pattern</a></li><li class=""><a href="#Producer-Consumer-Pattern" class="tw-scroll-smooth">Producer Consumer Pattern</a></li><li class=""><a href="#Lock-Striping" class="tw-scroll-smooth">Lock Striping</a></li></ul></li></ul></li><li class=""><a href="#참고자료" class="tw-scroll-smooth">참고자료</a></li></ul></section><hr/><section class="tw-my-10"><div><h2 id="병렬성과-동시성">병렬성과 동시성</h2>
<p>병렬성(parallelism)은 문제에 대한 해결 수단 중 하나라고 생각할 수 있다.</p>
<ul>
<li>32비트, 64비트 cpu 처럼 하드웨어도 병렬성을 갖고 있다. 나아가 cpu 는 pipelining, out-of-order execution, speculative execution 등으로 병렬성을 통해 성능을 향상시키고 있다. SIMD 같은 명령어 셋 역시 그렇다. 나아가 멀티코어프로세서 역시 병렬성을 갖고 있다.</li>
</ul>
<p>동시성(concurrency)은 문제의 속성이라고 생각할 수 있다. 노래를 들으며 웹서핑을 하는 것부터 유튜브가 세계 곳곳에 지어놓은 데이터센터까지 생활 속에서 다양하게 찾을 수 있다.</p>
<p>이 글은 위의 성격을 갖는 프로그램을 만들기 위해 사용하는 도구들과 쉽게 범할 오류들을 공부하며 정리하는 글이다.</p>
<h2 id="Thread-Synchronize">Thread Synchronize</h2>
<h3 id="Lock">Lock</h3>
<p>multithread programming 에서는 critical section 문제가 존재한다. 이를 해결하기 위해 semaphore, mutex, conditional variable 이라는 개념이 만들어졌다. 이들은 kernal 에서 운영체제와 하드웨어의 지원을 받아 구현되며 환경마다 구현방법이 다르다. 이에 대해선 아래를 참고.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VxVF6QzwtwI?si=6iDSUkaWckzT5pSi" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>
<br>
<p>이를 기초로 해서 더 복잡한 기능이 구현된다.</p>
<ul>
<li>예를들어 monitor 는 java 나 c# 의 프레임워크 차원에서 제공하는 기능으로 process 안에서의 mutex 와 conditional variable 기능을 지원한다. process 간에는 적용되지 않으므로 파일 시스템 등에는 적절하지 않지만 대신 더 빠르다.<sup><a href="#user-content-fn-so-mutex-vs-monitor" id="user-content-fnref-so-mutex-vs-monitor" data-footnote-ref="" aria-describedby="footnote-label">1</a></sup></li>
<li>이외에 interrupt 가능한 lock(일반적으로 데드락 스레드는 interrupt 불가능하다), 타임아웃 기능이 붙은 lock 도 있다.</li>
<li>하드웨어에서 지원하지 않는 크기의 데이터에 대한 atomic 연산을 구현하기 위해 lock 을 내부적으로 사용한다.</li>
</ul>
<h3 id="Memory-Model">Memory Model</h3>
<p>lock 뿐만 아니라 Memory Model 이 환경마다 다르므로 주의할 필요가 있다.</p>
<ul>
<li>c 환경에서 힙에 있는 값을 변경하면 모든 스레드에 적용이 된다.</li>
<li><a href="https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html">Java Memory Model</a> 에서는 <code>volatile</code> 키워드를 쓰는 등의 방법을 쓰지 않으면 보장이 되지 않는다. 다시말해 read 에도 스레드 동기화가 필요하다는 말이다. 또한 Constructor 가 호출되기 전에 외부스레드가 인스턴스에 접근할 수도 있어서 주의해야한다.<sup><a href="#user-content-fn-so1" id="user-content-fnref-so1" data-footnote-ref="" aria-describedby="footnote-label">2</a></sup></li>
</ul>
<h3 id="주의사항">주의사항</h3>
<h4 id="Dead-Lock">Dead Lock</h4>
<p>기본적으로 두 개 이상의 lock 을 가지면 생길 수 있는 Dead Lock 은 두가지 규칙만 지키면 예방은 할 수 있다.</p>
<ol>
<li>두개 이상의 lock 을 건다면 lock 의 순서를 부여하여 그 순서대로만 한다.</li>
<li>lock 을 걸고 외부 함수를 호출하는 경우 잠재적으로 위 규칙을 깰 수 있으니 자제한다.</li>
</ol>
<p>lock 을 걸면 안정성 테스트도 힘들어서 가능하면 lock 을 최소화하는게 좋다. 예를 들어서 race condition 이 있는 list 에 대해 루프를 돈다면 그 전체를 lock 걸고 복사한 뒤 이 복사본에 대해 루프를 도는게 좋다.</p>
<p>유사품으로 live lock 이 있다.</p>
<h4 id="Try-Catch">Try Catch</h4>
<figure data-rehype-pretty-code-figure=""><div data-rehype-pretty-code-title="" data-language="java" data-theme="github-dark" data-code="mylock.lock();
try{
    ...
} finally { table.unlock();}
">java<button title="code-copy-btn"></button></div><pre style="background-color:#24292e;color:#e1e4e8" tabindex="0" data-language="java" data-theme="github-dark"><code data-language="java" data-theme="github-dark" style="display: grid;"><span data-line=""><span style="color:#E1E4E8">mylock.</span><span style="color:#B392F0">lock</span><span style="color:#E1E4E8">();</span></span>
<span data-line=""><span style="color:#F97583">try</span><span style="color:#E1E4E8">{</span></span>
<span data-line=""><span style="color:#E1E4E8">    ...</span></span>
<span data-line=""><span style="color:#E1E4E8">} </span><span style="color:#F97583">finally</span><span style="color:#E1E4E8"> { table.</span><span style="color:#B392F0">unlock</span><span style="color:#E1E4E8">();}</span></span></code></pre></figure>
<p>lock/unlock 을 각각 호출하는 경우 <code>try...finally</code> 문으로 예외가 일어나도 반드시 unlock 을 할 수 있도록 해야한다.</p>
<h4 id="Spurious-Wakeup">Spurious Wakeup</h4>
<figure data-rehype-pretty-code-figure=""><div data-rehype-pretty-code-title="" data-language="java" data-theme="github-dark" data-code="synchronized(this){
    while(isValidCondition) // wake 후 Condition 을 반드시 체크해야하므로 if 로 대체 불가능.
        wait();
}
">java<button title="code-copy-btn"></button></div><pre style="background-color:#24292e;color:#e1e4e8" tabindex="0" data-language="java" data-theme="github-dark"><code data-language="java" data-theme="github-dark" style="display: grid;"><span data-line=""><span style="color:#F97583">synchronized</span><span style="color:#E1E4E8">(</span><span style="color:#79B8FF">this</span><span style="color:#E1E4E8">){</span></span>
<span data-line=""><span style="color:#F97583">    while</span><span style="color:#E1E4E8">(isValidCondition) </span><span style="color:#6A737D">// wake 후 Condition 을 반드시 체크해야하므로 if 로 대체 불가능.</span></span>
<span data-line=""><span style="color:#B392F0">        wait</span><span style="color:#E1E4E8">();</span></span>
<span data-line=""><span style="color:#E1E4E8">}</span></span></code></pre></figure>
<p>wait 시 의도하지 않았는데 Thread 가 깨어나는 <a href="https://en.wikipedia.org/wiki/Spurious_wakeup"><strong>spurious wakeup</strong></a> 을 유의하여 wakeup 이후에 Condition 을 다시 체크해야한다. 그래서 위처럼 <code>while</code> 문처럼 반복문을 사용하여 구현한다. 그렇지 않으면 의도치 않은 wakeup 이 발생한 경우 공유자원에 여러 스레드가 접근하게 되어 프로그램이 오작동을 할 수 있다.</p>
<h3 id="Patterns">Patterns</h3>
<h4 id="copy-on-write-array-list.">copy on write array list.</h4>
<p>내부 리스트 값을 변경할 때 카피 본을 생성하고 외부에서 루프를 돌 때는 카피본에 대해서 돌게하여 루프 시에 lock 을 걸지 않도록 해준다. 대신 수정이 잦으면 copy 때문에 더 느릴 수 있다.</p>
<h4 id="Thread-Pool">Thread Pool</h4>
<p>Thread 의 생성 비용 및 과도한 생성을 막는 패턴이다. 이는 다양한 패턴으로 분화된다.</p>
<p>분할정복을 위한 fork/join pool,</p>
<h4 id="Double-Checked-Pattern"><a href="https://en.wikipedia.org/wiki/Double-checked_locking">Double Checked Pattern</a></h4>
<p>잘못쓰면 잡기 힘든 오류를 만들어내는 안티패턴이다. 대개 싱글톤에서 사용되므로 직접 구현하기 보단 안전하다고 판명된 코드를 쓰는게 편하다.</p>
<h4 id="Producer-Consumer-Pattern">Producer Consumer Pattern</h4>
<p>Producer 와 Consummer 사이를 concurrency 를 지원하는 queue 로 연결해서 multi-threads 의 이점을 살리는 패턴이다. 이때 Producer 의 생산 속도가 너무 빠르면 메모리가 부족할 수 있으므로 둘 사이의 속도를 조절하는게 중요하다. java 에서는 <code>ArrayBlockingQueue</code> 가 이를 지원하는 예이다.</p>
<h4 id="Lock-Striping">Lock Striping</h4>
<p>HashMap 의 Atomicity 최적화 기법. Container 전체가 아니라 Bucket 마다 lock 을 걸게 해서 높은 수준의 병렬성을 지원한다.</p>
<p>비슷하게 리스트 같은 것도 Node 마다 lock 을 두고 Current/Next 만 Lock 을 걸어서 병렬성을 높일 수 있다.</p>
<h2 id="참고자료">참고자료</h2>
<p><a href="https://m.hanbit.co.kr/store/books/book_view.html?p_code=B3745244799">7가지 동시성 모델, 폴 부처</a></p>
<section data-footnotes="" class="footnotes"><h2 class="sr-only" id="Footnotes">Footnotes</h2>
<ol>
<li id="user-content-fn-so-mutex-vs-monitor">
<p><a href="https://stackoverflow.com/questions/38159668/monitor-vs-mutex">mutex vs montior, so</a> <a href="#user-content-fnref-so-mutex-vs-monitor" data-footnote-backref="" aria-label="Back to reference 1" class="data-footnote-backref">↩</a></p>
</li>
<li id="user-content-fn-so1">
<p><a href="https://stackoverflow.com/questions/61803042/java-constructors-and-thread-safety">java constructor and thread safety, so</a> <a href="#user-content-fnref-so1" data-footnote-backref="" aria-label="Back to reference 2" class="data-footnote-backref">↩</a></p>
</li>
</ol>
</section></div></section><div class="tw-flex tw-flex-row tw-text-sm undefined"><i class="material-symbols-outlined md-sm tw-self-center tw-w-5">Sell</i><div class="tw-color-text-dimmed">Tags :</div><div class="tw-ml-2 tw-pl-2 tw-pr-2                tw-rounded-md tw-bg-color-text-bg hover:tw-bg-color-text-bg-dimmed "><p class="tw-inline">design pattern</p></div><div class="tw-ml-2 tw-pl-2 tw-pr-2                tw-rounded-md tw-bg-color-text-bg hover:tw-bg-color-text-bg-dimmed "><p class="tw-inline">concurrency</p></div></div><hr class="tw-my-4"/><section class="tw-m-0 tw-p-0"><div class="tw-grid tw-grid-cols-2"><article class="tw-m-1 tw-rounded-2xl tw-border-2 tw-border-color-border tw-overflow-hidden hover:tw-border-color-primary hover:tw-transition-all hover:tw-duration-500"><a target="_self" href="/study-log/blog/programming/pattern/concurrency/dining-philosopher"><div class="tw-m-2 tw-overflow-hidden tw-text-center"><h5 class="tw-mb-0 tw-mt-0 false">Previous Post</h5><h4 class="tw-mb-0 tw-mt-0  tw-whitespace-nowrap tw-text-ellipsis tw-overflow-hidden">Dining Philosopher</h4></div></a></article><article class="tw-m-1 tw-rounded-2xl tw-border-color-border tw-border-2 "><div class="tw-m-2 tw-overflow-hidden tw-text-center"><h5 class="tw-mb-0 tw-mt-0 tw-text-color-border">Next Post</h5><h4 class="tw-mb-0 tw-mt-0  tw-whitespace-nowrap tw-text-ellipsis tw-overflow-hidden"></h4></div></article></div></section><hr class="tw-my-4"/><section></section> <hr class="tw-my-4"/><section class=""><h4 class="tw-mt-0 tw-mb-2">Related Posts</h4><div class="tw-grid tw-grid-cols-1 desk:tw-grid-cols-2 medium:tw-grid-cols-4 medium-wide:tw-grid-cols-4"><div class="tw-relative"><article class="mobile:tw-h-24 tw-m-1 tw-border-2 tw-rounded-2xl tw-border-color-border hover:tw-border-color-primary hover:tw-transition-all hover:tw-duration-500"><a target="_self" href="/study-log/blog/programming/pattern/concurrency/dining-philosopher"><div class="tw-grid mobile:tw-grid-cols-3 tw-m-2 tw-overflow-hidden"><div class="mobile:tw-col-span-2 mobile:tw-h-20 desk:tw-max-h-36 tw-mx-2 tw-overflow-hidden"><h4 class="tw-mb-0 tw-mt-0  tw-whitespace-nowrap tw-text-ellipsis tw-overflow-hidden tooltip-hover">Dining Philosopher</h4><p class="tw-text-color-text-light tw-text-sm  tw-text-ellipsis tw-overflow-hidden tooltip-hover">Dining Philosopher 관련 정리</p></div></div></a></article><div class="tooltip_tooltip__5rF2R  tooltip_right__Id7PU " style="position:absolute;top:auto;left:auto;right:auto"></div></div></div></section></article></main><footer class="tw-absolute tw-w-full -tw-bottom-20"><div class="tw-backdrop-brightness-95 tw-text-xs"><div class="tw-flex tw-p-4 tw-mr-4 tw-ml-4 mobile:tw-flex-col dark:tw-border-t-color-border dark:tw-border-t-2"><div class="tw-flex-col"><div class="tw-mb-3"><a class="tw-flex tw-self-center" target="_self" href="https://github.com/Mona04"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" class="tw-self-center" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path></svg><div class="tw-ml-1 tw-font-bold">GITHUB</div></a></div><div class="">© 2024 Mona04. Powered by <a rel="noopener noreferrer" target="_blank" href="https://nextjs.org/">NextJS</a>.</div></div><div class="tw-flex tw-self-end tw-ml-auto mobile:tw-hidden"><div class="">Last Build:</div><div class="tw-ml-1">17:37</div><div class="tw-ml-1">2024/12/6</div></div></div></div></footer><script src="/study-log/_next/static/chunks/webpack-7a682e7e5b3e6b61.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/study-log/_next/static/css/dd7e91777d3df03c.css\",\"style\"]\n2:HL[\"/study-log/_next/static/css/a40a511565153bc1.css\",\"style\"]\n3:HL[\"/study-log/_next/static/css/d1ab85c59d8dbdc1.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[2846,[],\"\"]\n6:I[2972,[\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"769\",\"static/chunks/769-57d8baf6e86747a5.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"631\",\"static/chunks/app/blog/%5B...categories%5D/page-f1535209f3f9f2a0.js\"],\"\"]\n7:I[1824,[\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"769\",\"static/chunks/769-57d8baf6e86747a5.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"631\",\"static/chunks/app/blog/%5B...categories%5D/page-f1535209f3f9f2a0.js\"],\"default\"]\na:I[7861,[\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"769\",\"static/chunks/769-57d8baf6e86747a5.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"631\",\"static/chunks/app/blog/%5B...categories%5D/page-f1535209f3f9f2a0.js\"],\"default\"]\nb:I[4497,[\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"769\",\"static/chunks/769-57d8baf6e86747a5.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"631\",\"static/chunks/app/blog/%5B...categories%5D/page-f1535209f3f9f2a0.js\"],\"default\"]\nc:I[3790,[\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"769\",\"static/chunks/769-57d8baf6e86747a5.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"631\",\"static/chunks/app/blog/%5B...categories%5D/page-f1535209f3f9f2a0.js\"],\"WithTooltip\"]\nd:I[4707,[],\"\"]\nf:I[6423,[],\"\"]\n10:I[4908,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chunks/app/layout-c6b97914a5942784.js\"],\"ContextProvider\"]\n11:I[1739,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chun"])</script><script>self.__next_f.push([1,"ks/app/layout-c6b97914a5942784.js\"],\"default\"]\n12:I[9813,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chunks/app/layout-c6b97914a5942784.js\"],\"default\"]\n13:I[4829,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chunks/app/layout-c6b97914a5942784.js\"],\"default\"]\n14:I[8127,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chunks/app/layout-c6b97914a5942784.js\"],\"default\"]\n15:I[2556,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chunks/app/layout-c6b97914a5942784.js\"],\"default\"]\n16:I[3268,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chunks/app/layout-c6b97914a5942784.js\"],\"default\"]\n17:I[8285,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chunks/app/layout-c6b97914a5942784.js\"],\"default\"]\n18:I[7656,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41"])</script><script>self.__next_f.push([1,"863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chunks/app/layout-c6b97914a5942784.js\"],\"default\"]\n19:I[5395,[\"929\",\"static/chunks/4f9d9cd8-f52099ca3f429dbf.js\",\"712\",\"static/chunks/3627521c-b58503ab95e41863.js\",\"827\",\"static/chunks/827-56c00c95f5d3481c.js\",\"597\",\"static/chunks/597-c23ebfe96800db79.js\",\"908\",\"static/chunks/908-bc79b8cd607d20d8.js\",\"185\",\"static/chunks/app/layout-c6b97914a5942784.js\"],\"CopyButtonScriptor\"]\n1b:I[1060,[],\"\"]\n8:T185d,"])</script><script>self.__next_f.push([1,"\n## 병렬성과 동시성\n\n병렬성(parallelism)은 문제에 대한 해결 수단 중 하나라고 생각할 수 있다. \n+ 32비트, 64비트 cpu 처럼 하드웨어도 병렬성을 갖고 있다. 나아가 cpu 는 pipelining, out-of-order execution, speculative execution 등으로 병렬성을 통해 성능을 향상시키고 있다. SIMD 같은 명령어 셋 역시 그렇다. 나아가 멀티코어프로세서 역시 병렬성을 갖고 있다.\n\n동시성(concurrency)은 문제의 속성이라고 생각할 수 있다. 노래를 들으며 웹서핑을 하는 것부터 유튜브가 세계 곳곳에 지어놓은 데이터센터까지 생활 속에서 다양하게 찾을 수 있다.\n\n이 글은 위의 성격을 갖는 프로그램을 만들기 위해 사용하는 도구들과 쉽게 범할 오류들을 공부하며 정리하는 글이다.\n\n## Thread Synchronize\n\n### Lock\n\nmultithread programming 에서는 critical section 문제가 존재한다. 이를 해결하기 위해 semaphore, mutex, conditional variable 이라는 개념이 만들어졌다. 이들은 kernal 에서 운영체제와 하드웨어의 지원을 받아 구현되며 환경마다 구현방법이 다르다. 이에 대해선 아래를 참고.\n\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/VxVF6QzwtwI?si=6iDSUkaWckzT5pSi\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen\u003e\u003c/iframe\u003e\n\u003cbr/\u003e\n\n이를 기초로 해서 더 복잡한 기능이 구현된다.\n+ 예를들어 monitor 는 java 나 c# 의 프레임워크 차원에서 제공하는 기능으로 process 안에서의 mutex 와 conditional variable 기능을 지원한다. process 간에는 적용되지 않으므로 파일 시스템 등에는 적절하지 않지만 대신 더 빠르다.[^so-mutex-vs-monitor]\n+ 이외에 interrupt 가능한 lock(일반적으로 데드락 스레드는 interrupt 불가능하다), 타임아웃 기능이 붙은 lock 도 있다.\n+ 하드웨어에서 지원하지 않는 크기의 데이터에 대한 atomic 연산을 구현하기 위해 lock 을 내부적으로 사용한다.\n\n### Memory Model\n\nlock 뿐만 아니라 Memory Model 이 환경마다 다르므로 주의할 필요가 있다.\n\n+ c 환경에서 힙에 있는 값을 변경하면 모든 스레드에 적용이 된다. \n+ [Java Memory Model](https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html) 에서는 ```volatile``` 키워드를 쓰는 등의 방법을 쓰지 않으면 보장이 되지 않는다. 다시말해 read 에도 스레드 동기화가 필요하다는 말이다. 또한 Constructor 가 호출되기 전에 외부스레드가 인스턴스에 접근할 수도 있어서 주의해야한다.[^so1]\n\n\n### 주의사항\n\n#### Dead Lock\n\n기본적으로 두 개 이상의 lock 을 가지면 생길 수 있는 Dead Lock 은 두가지 규칙만 지키면 예방은 할 수 있다.\n1. 두개 이상의 lock 을 건다면 lock 의 순서를 부여하여 그 순서대로만 한다. \n2. lock 을 걸고 외부 함수를 호출하는 경우 잠재적으로 위 규칙을 깰 수 있으니 자제한다.\n\nlock 을 걸면 안정성 테스트도 힘들어서 가능하면 lock 을 최소화하는게 좋다. 예를 들어서 race condition 이 있는 list 에 대해 루프를 돈다면 그 전체를 lock 걸고 복사한 뒤 이 복사본에 대해 루프를 도는게 좋다.\n\n유사품으로 live lock 이 있다.\n\n#### Try Catch\n\n```java\nmylock.lock();\ntry{\n    ...\n} finally { table.unlock();}\n```\n\nlock/unlock 을 각각 호출하는 경우 ```try...finally``` 문으로 예외가 일어나도 반드시 unlock 을 할 수 있도록 해야한다.\n\n#### Spurious Wakeup\n\n```java\nsynchronized(this){\n    while(isValidCondition) // wake 후 Condition 을 반드시 체크해야하므로 if 로 대체 불가능.\n        wait();\n}\n```\n\nwait 시 의도하지 않았는데 Thread 가 깨어나는 [__spurious wakeup__](https://en.wikipedia.org/wiki/Spurious_wakeup) 을 유의하여 wakeup 이후에 Condition 을 다시 체크해야한다. 그래서 위처럼 ```while``` 문처럼 반복문을 사용하여 구현한다. 그렇지 않으면 의도치 않은 wakeup 이 발생한 경우 공유자원에 여러 스레드가 접근하게 되어 프로그램이 오작동을 할 수 있다.\n\n### Patterns\n\n#### copy on write array list. \n\n내부 리스트 값을 변경할 때 카피 본을 생성하고 외부에서 루프를 돌 때는 카피본에 대해서 돌게하여 루프 시에 lock 을 걸지 않도록 해준다. 대신 수정이 잦으면 copy 때문에 더 느릴 수 있다.\n\n#### Thread Pool\n\nThread 의 생성 비용 및 과도한 생성을 막는 패턴이다. 이는 다양한 패턴으로 분화된다.\n\n분할정복을 위한 fork/join pool, \n\n#### [Double Checked Pattern](https://en.wikipedia.org/wiki/Double-checked_locking)\n\n잘못쓰면 잡기 힘든 오류를 만들어내는 안티패턴이다. 대개 싱글톤에서 사용되므로 직접 구현하기 보단 안전하다고 판명된 코드를 쓰는게 편하다.\n\n#### Producer Consumer Pattern\n\nProducer 와 Consummer 사이를 concurrency 를 지원하는 queue 로 연결해서 multi-threads 의 이점을 살리는 패턴이다. 이때 Producer 의 생산 속도가 너무 빠르면 메모리가 부족할 수 있으므로 둘 사이의 속도를 조절하는게 중요하다. java 에서는 ```ArrayBlockingQueue``` 가 이를 지원하는 예이다.\n\n#### Lock Striping\n\nHashMap 의 Atomicity 최적화 기법. Container 전체가 아니라 Bucket 마다 lock 을 걸게 해서 높은 수준의 병렬성을 지원한다. \n\n비슷하게 리스트 같은 것도 Node 마다 lock 을 두고 Current/Next 만 Lock 을 걸어서 병렬성을 높일 수 있다.\n\n## 참고자료\n\n[7가지 동시성 모델, 폴 부처](https://m.hanbit.co.kr/store/books/book_view.html?p_code=B3745244799)\n\n[^so1]:[java constructor and thread safety, so](https://stackoverflow.com/questions/61803042/java-constructors-and-thread-safety)\n\n[^so-mutex-vs-monitor]:[mutex vs montior, so](https://stackoverflow.com/questions/38159668/monitor-vs-mutex)"])</script><script>self.__next_f.push([1,"9:T254e,"])</script><script>self.__next_f.push([1,"\u003ch2 id=\"병렬성과-동시성\"\u003e병렬성과 동시성\u003c/h2\u003e\n\u003cp\u003e병렬성(parallelism)은 문제에 대한 해결 수단 중 하나라고 생각할 수 있다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e32비트, 64비트 cpu 처럼 하드웨어도 병렬성을 갖고 있다. 나아가 cpu 는 pipelining, out-of-order execution, speculative execution 등으로 병렬성을 통해 성능을 향상시키고 있다. SIMD 같은 명령어 셋 역시 그렇다. 나아가 멀티코어프로세서 역시 병렬성을 갖고 있다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e동시성(concurrency)은 문제의 속성이라고 생각할 수 있다. 노래를 들으며 웹서핑을 하는 것부터 유튜브가 세계 곳곳에 지어놓은 데이터센터까지 생활 속에서 다양하게 찾을 수 있다.\u003c/p\u003e\n\u003cp\u003e이 글은 위의 성격을 갖는 프로그램을 만들기 위해 사용하는 도구들과 쉽게 범할 오류들을 공부하며 정리하는 글이다.\u003c/p\u003e\n\u003ch2 id=\"Thread-Synchronize\"\u003eThread Synchronize\u003c/h2\u003e\n\u003ch3 id=\"Lock\"\u003eLock\u003c/h3\u003e\n\u003cp\u003emultithread programming 에서는 critical section 문제가 존재한다. 이를 해결하기 위해 semaphore, mutex, conditional variable 이라는 개념이 만들어졌다. 이들은 kernal 에서 운영체제와 하드웨어의 지원을 받아 구현되며 환경마다 구현방법이 다르다. 이에 대해선 아래를 참고.\u003c/p\u003e\n\u003ciframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/VxVF6QzwtwI?si=6iDSUkaWckzT5pSi\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen\u003e\u003c/iframe\u003e\n\u003cbr\u003e\n\u003cp\u003e이를 기초로 해서 더 복잡한 기능이 구현된다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003e예를들어 monitor 는 java 나 c# 의 프레임워크 차원에서 제공하는 기능으로 process 안에서의 mutex 와 conditional variable 기능을 지원한다. process 간에는 적용되지 않으므로 파일 시스템 등에는 적절하지 않지만 대신 더 빠르다.\u003csup\u003e\u003ca href=\"#user-content-fn-so-mutex-vs-monitor\" id=\"user-content-fnref-so-mutex-vs-monitor\" data-footnote-ref=\"\" aria-describedby=\"footnote-label\"\u003e1\u003c/a\u003e\u003c/sup\u003e\u003c/li\u003e\n\u003cli\u003e이외에 interrupt 가능한 lock(일반적으로 데드락 스레드는 interrupt 불가능하다), 타임아웃 기능이 붙은 lock 도 있다.\u003c/li\u003e\n\u003cli\u003e하드웨어에서 지원하지 않는 크기의 데이터에 대한 atomic 연산을 구현하기 위해 lock 을 내부적으로 사용한다.\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"Memory-Model\"\u003eMemory Model\u003c/h3\u003e\n\u003cp\u003elock 뿐만 아니라 Memory Model 이 환경마다 다르므로 주의할 필요가 있다.\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ec 환경에서 힙에 있는 값을 변경하면 모든 스레드에 적용이 된다.\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-17.html\"\u003eJava Memory Model\u003c/a\u003e 에서는 \u003ccode\u003evolatile\u003c/code\u003e 키워드를 쓰는 등의 방법을 쓰지 않으면 보장이 되지 않는다. 다시말해 read 에도 스레드 동기화가 필요하다는 말이다. 또한 Constructor 가 호출되기 전에 외부스레드가 인스턴스에 접근할 수도 있어서 주의해야한다.\u003csup\u003e\u003ca href=\"#user-content-fn-so1\" id=\"user-content-fnref-so1\" data-footnote-ref=\"\" aria-describedby=\"footnote-label\"\u003e2\u003c/a\u003e\u003c/sup\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch3 id=\"주의사항\"\u003e주의사항\u003c/h3\u003e\n\u003ch4 id=\"Dead-Lock\"\u003eDead Lock\u003c/h4\u003e\n\u003cp\u003e기본적으로 두 개 이상의 lock 을 가지면 생길 수 있는 Dead Lock 은 두가지 규칙만 지키면 예방은 할 수 있다.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e두개 이상의 lock 을 건다면 lock 의 순서를 부여하여 그 순서대로만 한다.\u003c/li\u003e\n\u003cli\u003elock 을 걸고 외부 함수를 호출하는 경우 잠재적으로 위 규칙을 깰 수 있으니 자제한다.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003elock 을 걸면 안정성 테스트도 힘들어서 가능하면 lock 을 최소화하는게 좋다. 예를 들어서 race condition 이 있는 list 에 대해 루프를 돈다면 그 전체를 lock 걸고 복사한 뒤 이 복사본에 대해 루프를 도는게 좋다.\u003c/p\u003e\n\u003cp\u003e유사품으로 live lock 이 있다.\u003c/p\u003e\n\u003ch4 id=\"Try-Catch\"\u003eTry Catch\u003c/h4\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cdiv data-rehype-pretty-code-title=\"\" data-language=\"java\" data-theme=\"github-dark\" data-code=\"mylock.lock();\ntry{\n    ...\n} finally { table.unlock();}\n\"\u003ejava\u003cbutton title=\"code-copy-btn\"\u003e\u003c/button\u003e\u003c/div\u003e\u003cpre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"java\" data-theme=\"github-dark\"\u003e\u003ccode data-language=\"java\" data-theme=\"github-dark\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E1E4E8\"\u003emylock.\u003c/span\u003e\u003cspan style=\"color:#B392F0\"\u003elock\u003c/span\u003e\u003cspan style=\"color:#E1E4E8\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F97583\"\u003etry\u003c/span\u003e\u003cspan style=\"color:#E1E4E8\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E1E4E8\"\u003e    ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E1E4E8\"\u003e} \u003c/span\u003e\u003cspan style=\"color:#F97583\"\u003efinally\u003c/span\u003e\u003cspan style=\"color:#E1E4E8\"\u003e { table.\u003c/span\u003e\u003cspan style=\"color:#B392F0\"\u003eunlock\u003c/span\u003e\u003cspan style=\"color:#E1E4E8\"\u003e();}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003elock/unlock 을 각각 호출하는 경우 \u003ccode\u003etry...finally\u003c/code\u003e 문으로 예외가 일어나도 반드시 unlock 을 할 수 있도록 해야한다.\u003c/p\u003e\n\u003ch4 id=\"Spurious-Wakeup\"\u003eSpurious Wakeup\u003c/h4\u003e\n\u003cfigure data-rehype-pretty-code-figure=\"\"\u003e\u003cdiv data-rehype-pretty-code-title=\"\" data-language=\"java\" data-theme=\"github-dark\" data-code=\"synchronized(this){\n    while(isValidCondition) // wake 후 Condition 을 반드시 체크해야하므로 if 로 대체 불가능.\n        wait();\n}\n\"\u003ejava\u003cbutton title=\"code-copy-btn\"\u003e\u003c/button\u003e\u003c/div\u003e\u003cpre style=\"background-color:#24292e;color:#e1e4e8\" tabindex=\"0\" data-language=\"java\" data-theme=\"github-dark\"\u003e\u003ccode data-language=\"java\" data-theme=\"github-dark\" style=\"display: grid;\"\u003e\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F97583\"\u003esynchronized\u003c/span\u003e\u003cspan style=\"color:#E1E4E8\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#79B8FF\"\u003ethis\u003c/span\u003e\u003cspan style=\"color:#E1E4E8\"\u003e){\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#F97583\"\u003e    while\u003c/span\u003e\u003cspan style=\"color:#E1E4E8\"\u003e(isValidCondition) \u003c/span\u003e\u003cspan style=\"color:#6A737D\"\u003e// wake 후 Condition 을 반드시 체크해야하므로 if 로 대체 불가능.\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#B392F0\"\u003e        wait\u003c/span\u003e\u003cspan style=\"color:#E1E4E8\"\u003e();\u003c/span\u003e\u003c/span\u003e\n\u003cspan data-line=\"\"\u003e\u003cspan style=\"color:#E1E4E8\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/figure\u003e\n\u003cp\u003ewait 시 의도하지 않았는데 Thread 가 깨어나는 \u003ca href=\"https://en.wikipedia.org/wiki/Spurious_wakeup\"\u003e\u003cstrong\u003espurious wakeup\u003c/strong\u003e\u003c/a\u003e 을 유의하여 wakeup 이후에 Condition 을 다시 체크해야한다. 그래서 위처럼 \u003ccode\u003ewhile\u003c/code\u003e 문처럼 반복문을 사용하여 구현한다. 그렇지 않으면 의도치 않은 wakeup 이 발생한 경우 공유자원에 여러 스레드가 접근하게 되어 프로그램이 오작동을 할 수 있다.\u003c/p\u003e\n\u003ch3 id=\"Patterns\"\u003ePatterns\u003c/h3\u003e\n\u003ch4 id=\"copy-on-write-array-list.\"\u003ecopy on write array list.\u003c/h4\u003e\n\u003cp\u003e내부 리스트 값을 변경할 때 카피 본을 생성하고 외부에서 루프를 돌 때는 카피본에 대해서 돌게하여 루프 시에 lock 을 걸지 않도록 해준다. 대신 수정이 잦으면 copy 때문에 더 느릴 수 있다.\u003c/p\u003e\n\u003ch4 id=\"Thread-Pool\"\u003eThread Pool\u003c/h4\u003e\n\u003cp\u003eThread 의 생성 비용 및 과도한 생성을 막는 패턴이다. 이는 다양한 패턴으로 분화된다.\u003c/p\u003e\n\u003cp\u003e분할정복을 위한 fork/join pool,\u003c/p\u003e\n\u003ch4 id=\"Double-Checked-Pattern\"\u003e\u003ca href=\"https://en.wikipedia.org/wiki/Double-checked_locking\"\u003eDouble Checked Pattern\u003c/a\u003e\u003c/h4\u003e\n\u003cp\u003e잘못쓰면 잡기 힘든 오류를 만들어내는 안티패턴이다. 대개 싱글톤에서 사용되므로 직접 구현하기 보단 안전하다고 판명된 코드를 쓰는게 편하다.\u003c/p\u003e\n\u003ch4 id=\"Producer-Consumer-Pattern\"\u003eProducer Consumer Pattern\u003c/h4\u003e\n\u003cp\u003eProducer 와 Consummer 사이를 concurrency 를 지원하는 queue 로 연결해서 multi-threads 의 이점을 살리는 패턴이다. 이때 Producer 의 생산 속도가 너무 빠르면 메모리가 부족할 수 있으므로 둘 사이의 속도를 조절하는게 중요하다. java 에서는 \u003ccode\u003eArrayBlockingQueue\u003c/code\u003e 가 이를 지원하는 예이다.\u003c/p\u003e\n\u003ch4 id=\"Lock-Striping\"\u003eLock Striping\u003c/h4\u003e\n\u003cp\u003eHashMap 의 Atomicity 최적화 기법. Container 전체가 아니라 Bucket 마다 lock 을 걸게 해서 높은 수준의 병렬성을 지원한다.\u003c/p\u003e\n\u003cp\u003e비슷하게 리스트 같은 것도 Node 마다 lock 을 두고 Current/Next 만 Lock 을 걸어서 병렬성을 높일 수 있다.\u003c/p\u003e\n\u003ch2 id=\"참고자료\"\u003e참고자료\u003c/h2\u003e\n\u003cp\u003e\u003ca href=\"https://m.hanbit.co.kr/store/books/book_view.html?p_code=B3745244799\"\u003e7가지 동시성 모델, 폴 부처\u003c/a\u003e\u003c/p\u003e\n\u003csection data-footnotes=\"\" class=\"footnotes\"\u003e\u003ch2 class=\"sr-only\" id=\"Footnotes\"\u003eFootnotes\u003c/h2\u003e\n\u003col\u003e\n\u003cli id=\"user-content-fn-so-mutex-vs-monitor\"\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/questions/38159668/monitor-vs-mutex\"\u003emutex vs montior, so\u003c/a\u003e \u003ca href=\"#user-content-fnref-so-mutex-vs-monitor\" data-footnote-backref=\"\" aria-label=\"Back to reference 1\" class=\"data-footnote-backref\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003cli id=\"user-content-fn-so1\"\u003e\n\u003cp\u003e\u003ca href=\"https://stackoverflow.com/questions/61803042/java-constructors-and-thread-safety\"\u003ejava constructor and thread safety, so\u003c/a\u003e \u003ca href=\"#user-content-fnref-so1\" data-footnote-backref=\"\" aria-label=\"Back to reference 2\" class=\"data-footnote-backref\"\u003e↩\u003c/a\u003e\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003c/section\u003e"])</script><script>self.__next_f.push([1,"e:[\"categories\",\"programming/pattern/concurrency/concurrency-parallelism\",\"c\"]\n1c:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L4\",null,{\"buildId\":\"NUoDpoZ0bXYamzRsoBnzc\",\"assetPrefix\":\"/study-log\",\"urlParts\":[\"\",\"blog\",\"programming\",\"pattern\",\"concurrency\",\"concurrency-parallelism\"],\"initialTree\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"categories\",\"programming/pattern/concurrency/concurrency-parallelism\",\"c\"],{\"children\":[\"__PAGE__?{\\\"categories\\\":[\\\"programming\\\",\\\"pattern\\\",\\\"concurrency\\\",\\\"concurrency-parallelism\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"blog\",{\"children\":[[\"categories\",\"programming/pattern/concurrency/concurrency-parallelism\",\"c\"],{\"children\":[\"__PAGE__\",{},[[\"$L5\",[\"$\",\"article\",null,{\"className\":\"content2\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"mobile:tw-text-2xl tw-text-3xl tw-leading-normal tw-font-bold tw-mt-0\",\"itemProp\":\"headline\",\"children\":\"Patterns for Concurrency Programming\"}],[\"$\",\"nav\",null,{\"className\":\"tw-flex tw-flex-row tw-text-smtw-mb-4\",\"children\":[[\"$\",\"span\",null,{\"className\":\"material-symbols-outlined md-base tw-self-center tw-align-text-top  tw-w-5\",\"children\":\"folder_open\"}],[\"$\",\"$L6\",null,{\"className\":\"tw-text-sm\",\"href\":\"/\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":\"Home\"}],[[\"$\",\"div\",\"/blog/\",{\"className\":\"tw-flex tw-flex-row tw-text-sm\",\"children\":[[\"$\",\"div\",null,{\"children\":\"/\"}],[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/blog/\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":\"blog\"}]]}],[\"$\",\"div\",\"/blog/programming/\",{\"className\":\"tw-flex tw-flex-row tw-text-sm\",\"children\":[[\"$\",\"div\",null,{\"children\":\"/\"}],[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/blog/programming/\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":\"programming\"}]]}],[\"$\",\"div\",\"/blog/programming/pattern/\",{\"className\":\"tw-flex tw-flex-row tw-text-sm\",\"children\":[[\"$\",\"div\",null,{\"children\":\"/\"}],[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/blog/programming/pattern/\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":\"pattern\"}]]}],[\"$\",\"div\",\"/blog/programming/pattern/concurrency/\",{\"className\":\"tw-flex tw-flex-row tw-text-sm\",\"children\":[[\"$\",\"div\",null,{\"children\":\"/\"}],[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/blog/programming/pattern/concurrency/\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":\"concurrency\"}]]}],[\"$\",\"div\",\"/blog/programming/pattern/concurrency/concurrency-parallelism/\",{\"className\":\"tw-flex tw-flex-row tw-text-sm\",\"children\":[[\"$\",\"div\",null,{\"children\":\"/\"}],[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/blog/programming/pattern/concurrency/concurrency-parallelism/\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":\"concurrency-parallelism\"}]]}]],\"$undefined\"]}],[\"$\",\"div\",null,{\"className\":\"tw-mt-0.5\",\"children\":[\"$\",\"div\",null,{\"className\":\"tw-flex tw-flex-row tw-text-sm\",\"children\":[[\"$\",\"i\",null,{\"className\":\"material-symbols-outlined md-sm tw-self-center tw-w-5\",\"children\":\"schedule\"}],[\"$\",\"div\",null,{\"className\":\"tw-color-text-dimmed\",\"children\":\"Posted  :\"}],[\"$\",\"div\",null,{\"className\":\"tw-ml-2\",\"children\":\"4/29/2024\"}]]}]}],[\"$\",\"$L7\",null,{\"mdSrc\":\"$8\"}],[\"$\",\"hr\",null,{}],[\"$\",\"section\",null,{\"className\":\"tw-my-10\",\"children\":[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$9\"}}]}],[\"$\",\"$La\",null,{\"tags\":[\"design pattern\",\"concurrency\"]}],[\"$\",\"hr\",null,{\"className\":\"tw-my-4\"}],[\"$\",\"section\",null,{\"className\":\"tw-m-0 tw-p-0\",\"children\":[\"$\",\"div\",null,{\"className\":\"tw-grid tw-grid-cols-2\",\"children\":[[\"$\",\"article\",null,{\"className\":\"tw-m-1 tw-rounded-2xl tw-border-2 tw-border-color-border tw-overflow-hidden hover:tw-border-color-primary hover:tw-transition-all hover:tw-duration-500\",\"children\":[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/blog/programming/pattern/concurrency/dining-philosopher\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":[\"$\",\"div\",null,{\"className\":\"tw-m-2 tw-overflow-hidden tw-text-center\",\"children\":[[\"$\",\"h5\",null,{\"className\":\"tw-mb-0 tw-mt-0 false\",\"children\":\"Previous Post\"}],[\"$\",\"h4\",null,{\"className\":\"tw-mb-0 tw-mt-0  tw-whitespace-nowrap tw-text-ellipsis tw-overflow-hidden\",\"children\":\"Dining Philosopher\"}]]}]}]}],[\"$\",\"article\",null,{\"className\":\"tw-m-1 tw-rounded-2xl tw-border-color-border tw-border-2 \",\"children\":[\"$\",\"div\",null,{\"className\":\"tw-m-2 tw-overflow-hidden tw-text-center\",\"children\":[[\"$\",\"h5\",null,{\"className\":\"tw-mb-0 tw-mt-0 tw-text-color-border\",\"children\":\"Next Post\"}],[\"$\",\"h4\",null,{\"className\":\"tw-mb-0 tw-mt-0  tw-whitespace-nowrap tw-text-ellipsis tw-overflow-hidden\",\"children\":\"$undefined\"}]]}]}]]}]}],[\"$\",\"hr\",null,{\"className\":\"tw-my-4\"}],[[\"$\",\"$Lb\",null,{}],\" \",[\"$\",\"hr\",null,{\"className\":\"tw-my-4\"}]],[\"$\",\"section\",null,{\"className\":\"\",\"children\":[[\"$\",\"h4\",null,{\"className\":\"tw-mt-0 tw-mb-2\",\"children\":\"Related Posts\"}],[\"$\",\"div\",null,{\"className\":\"tw-grid tw-grid-cols-1 desk:tw-grid-cols-2 medium:tw-grid-cols-4 medium-wide:tw-grid-cols-4\",\"children\":[[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"article\",null,{\"className\":\"mobile:tw-h-24 tw-m-1 tw-border-2 tw-rounded-2xl tw-border-color-border hover:tw-border-color-primary hover:tw-transition-all hover:tw-duration-500\",\"children\":[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/blog/programming/pattern/concurrency/dining-philosopher\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":[\"$\",\"div\",null,{\"className\":\"tw-grid mobile:tw-grid-cols-3 tw-m-2 tw-overflow-hidden\",\"children\":[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"mobile:tw-col-span-2 mobile:tw-h-20 desk:tw-max-h-36 tw-mx-2 tw-overflow-hidden\",\"children\":[[\"$\",\"h4\",null,{\"className\":\"tw-mb-0 tw-mt-0  tw-whitespace-nowrap tw-text-ellipsis tw-overflow-hidden tooltip-hover\",\"children\":\"Dining Philosopher\"}],[\"$\",\"p\",null,{\"className\":\"tw-text-color-text-light tw-text-sm  tw-text-ellipsis tw-overflow-hidden tooltip-hover\",\"children\":\"Dining Philosopher 관련 정리\"}]]}]]}]}]}]}]]}]]}]]}],[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/study-log/_next/static/css/d1ab85c59d8dbdc1.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]],null],null]},[[null,[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\",\"$e\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lf\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null],null]},[null,[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"blog\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lf\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/study-log/_next/static/css/dd7e91777d3df03c.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/study-log/_next/static/css/a40a511565153bc1.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"tw-relative tw-min-h-screen tw-bg-color-page-background\",\"children\":[[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"(function(){try{(null==localStorage.getItem(\\\"theme\\\")\u0026\u0026window.matchMedia(\\\"(prefers-color-scheme: dark)\\\").matches||\\\"dark\\\"==localStorage.getItem(\\\"theme\\\"))\u0026\u0026document.documentElement.setAttribute(\\\"data-theme\\\",\\\"dark\\\")}catch(e){}})()\"}}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://fonts.googleapis.com/css2?family=Noto+Sans\u0026family=Noto+Sans+KR\u0026display=swap\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://fonts.googleapis.com/css2?family=Gothic+A1\u0026display=swap\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200\"}],[\"$\",\"link\",null,{\"rel\":\"stylesheet\",\"href\":\"https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css\",\"integrity\":\"sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC\",\"crossOrigin\":\"anonymous\"}],[\"$\",\"$L10\",null,{\"children\":[[\"$\",\"nav\",null,{\"className\":\"masthead_masthead__zVIwm\",\"children\":[[\"$\",\"$L11\",null,{}],[\"$\",\"$L6\",null,{\"className\":\"tw-self-center tw-ml-1 tw-font-sans tw-font-bold tw-text-color-primary tw-text-xl hover:tw-text-color-text\",\"href\":\"/\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":\"LOG | STUDY\"}],[\"$\",\"div\",null,{\"className\":\"tw-grow\"}],[\"$\",\"$L12\",null,{\"className\":\"tw-flex tw-self-center tw-text-xl\"}],[\"$\",\"$L13\",null,{\"className\":\"tw-flex tw-self-center tw-ml-2 tw-mr-4 tw-text-xl \"}]]}],[\"$\",\"$L14\",null,{}],[\"$\",\"aside\",null,{\"children\":[\"$\",\"$L15\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"sidebar_sidebar__gN2ma\",\"children\":[[\"$\",\"$L16\",null,{\"slug\":\"/\",\"label\":\"HOME\",\"refCount\":-1,\"depth\":0}],[\"$\",\"$L16\",null,{\"slug\":\"/portfolio\",\"label\":\"PORTFOLIO★\",\"refCount\":-1,\"depth\":0}],[\"$\",\"$L16\",null,{\"slug\":\"/tags\",\"label\":\"TAGS\",\"refCount\":-1,\"depth\":0}],[\"$\",\"div\",null,{\"children\":[[\"$\",\"$L16\",\"/blog\",{\"slug\":\"/blog\",\"label\":\"BLOG\",\"refCount\":23,\"depth\":0,\"children\":[[\"$\",\"$L16\",\"/blog/ps\",{\"slug\":\"/blog/ps\",\"label\":\"PS\",\"refCount\":1,\"depth\":1,\"children\":\"$undefined\"}],[\"$\",\"$L16\",\"/blog/study\",{\"slug\":\"/blog/study\",\"label\":\"STUDY\",\"refCount\":1,\"depth\":1,\"children\":\"$undefined\"}],[\"$\",\"$L16\",\"/blog/computer-science\",{\"slug\":\"/blog/computer-science\",\"label\":\"COMPUTER-SCIENCE\",\"refCount\":5,\"depth\":1,\"children\":[[\"$\",\"$L16\",\"/blog/computer-science/graphics\",{\"slug\":\"/blog/computer-science/graphics\",\"label\":\"GRAPHICS\",\"refCount\":3,\"depth\":2,\"children\":\"$undefined\"}],[\"$\",\"$L16\",\"/blog/computer-science/algorithm\",{\"slug\":\"/blog/computer-science/algorithm\",\"label\":\"ALGORITHM\",\"refCount\":2,\"depth\":2,\"children\":\"$undefined\"}]]}],[\"$\",\"$L16\",\"/blog/programming\",{\"slug\":\"/blog/programming\",\"label\":\"PROGRAMMING\",\"refCount\":16,\"depth\":1,\"children\":[[\"$\",\"$L16\",\"/blog/programming/pattern\",{\"slug\":\"/blog/programming/pattern\",\"label\":\"PATTERN\",\"refCount\":6,\"depth\":2,\"children\":[[\"$\",\"$L16\",\"/blog/programming/pattern/concurrency\",{\"slug\":\"/blog/programming/pattern/concurrency\",\"label\":\"CONCURRENCY\",\"refCount\":2,\"depth\":3,\"children\":\"$undefined\"}]]}],[\"$\",\"$L16\",\"/blog/programming/cpp\",{\"slug\":\"/blog/programming/cpp\",\"label\":\"CPP\",\"refCount\":1,\"depth\":2,\"children\":\"$undefined\"}],[\"$\",\"$L16\",\"/blog/programming/web\",{\"slug\":\"/blog/programming/web\",\"label\":\"WEB\",\"refCount\":3,\"depth\":2,\"children\":\"$undefined\"}],[\"$\",\"$L16\",\"/blog/programming/wpf\",{\"slug\":\"/blog/programming/wpf\",\"label\":\"WPF\",\"refCount\":4,\"depth\":2,\"children\":\"$undefined\"}],[\"$\",\"$L16\",\"/blog/programming/tips\",{\"slug\":\"/blog/programming/tips\",\"label\":\"TIPS\",\"refCount\":2,\"depth\":2,\"children\":\"$undefined\"}]]}]]}]]}]]}]}]}],[\"$\",\"section\",null,{\"children\":[\"$\",\"$L17\",null,{\"children\":[\"$\",\"$L18\",null,{}]}]}],[\"$\",\"main\",null,{\"className\":\"tw-mt-nav-height tw-pb-52\",\"children\":[\"$\",\"$Ld\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lf\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"main\",null,{\"children\":[\"$\",\"div\",null,{\"children\":\"404\"}]}],\"notFoundStyles\":[]}]}],[\"$\",\"footer\",null,{\"className\":\"tw-absolute tw-w-full -tw-bottom-20\",\"children\":[\"$\",\"div\",null,{\"className\":\"tw-backdrop-brightness-95 tw-text-xs\",\"children\":[\"$\",\"div\",null,{\"className\":\"tw-flex tw-p-4 tw-mr-4 tw-ml-4 mobile:tw-flex-col dark:tw-border-t-color-border dark:tw-border-t-2\",\"children\":[[\"$\",\"div\",null,{\"className\":\"tw-flex-col\",\"children\":[[\"$\",\"div\",null,{\"className\":\"tw-mb-3\",\"children\":[\"$\",\"$L6\",null,{\"className\":\"tw-flex tw-self-center\",\"href\":\"https://github.com/Mona04\",\"rel\":\"$undefined\",\"target\":\"_self\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":[[\"$\",\"svg\",null,{\"stroke\":\"currentColor\",\"fill\":\"currentColor\",\"strokeWidth\":\"0\",\"viewBox\":\"0 0 1024 1024\",\"className\":\"tw-self-center\",\"children\":[\"$undefined\",[[\"$\",\"path\",\"0\",{\"d\":\"M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9a127.5 127.5 0 0 1 38.1 91v112.5c.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z\",\"children\":\"$undefined\"}]]],\"style\":{\"color\":\"$undefined\"},\"height\":\"1em\",\"width\":\"1em\",\"xmlns\":\"http://www.w3.org/2000/svg\"}],[\"$\",\"div\",null,{\"className\":\"tw-ml-1 tw-font-bold\",\"children\":\"GITHUB\"}]]}]}],[\"$\",\"div\",null,{\"className\":\"\",\"children\":[\"© 2024 Mona04. Powered by \",[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"https://nextjs.org/\",\"rel\":\"noopener noreferrer\",\"target\":\"_blank\",\"onClick\":\"$undefined\",\"prefetch\":false,\"children\":\"NextJS\"}],\".\"]}]]}],[\"$\",\"div\",null,{\"className\":\"tw-flex tw-self-end tw-ml-auto mobile:tw-hidden\",\"children\":[[\"$\",\"div\",null,{\"className\":\"\",\"children\":\"Last Build:\"}],[\"$\",\"div\",null,{\"className\":\"tw-ml-1\",\"children\":\"17:37\"}],[\"$\",\"div\",null,{\"className\":\"tw-ml-1\",\"children\":\"2024/12/6\"}]]}]]}]}]}]]}],[\"$\",\"$L19\",null,{}]]}]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$L1a\"],\"globalErrorComponent\":\"$1b\",\"missingSlots\":\"$W1c\"}]\n"])</script><script>self.__next_f.push([1,"1a:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Patterns for Concurrency Programming\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Concurrency Programming 에서 쓰이는 도구와 쉽게 범할 요류들 정리\"}],[\"$\",\"link\",\"4\",{\"rel\":\"author\",\"href\":\"moksha1905@gmail.com\"}],[\"$\",\"meta\",\"5\",{\"name\":\"author\",\"content\":\"Mona04\"}],[\"$\",\"meta\",\"6\",{\"name\":\"category\",\"content\":\"/blog/programming/pattern/concurrency/concurrency-parallelism\"}],[\"$\",\"link\",\"7\",{\"rel\":\"canonical\",\"href\":\"https://mona04.github.io/study-log/blog/programming/pattern/concurrency/concurrency-parallelism\"}],[\"$\",\"link\",\"8\",{\"rel\":\"icon\",\"href\":\"/study-log/favicon.ico\"}]]\n5:null\n"])</script></body></html>